// MongoDB Playground
// Use Ctrl+Space inside a snippet or a string literal to trigger completions.

/* Es una relacion entre varios documentos, en este caso a la hora de realizar consulta sobre el proyecto 
 * se junta con la informacion del lider.
 */

// BD name
const database = 'ImproTicDB';

// The current database to use.
use(database);

db.projects.aggregate([{
  $lookup: {
    from: 'users',
    localField: 'leader_id',
    foreignField: '_id',
    as: 'leader'
  }
}, {
  $unwind: { path: '$leader' }
}, {
  $addFields: {
    leaderDocumentId: '$leader.documentId',
    leaderName: '$leader.fullName'
  }
}, {
  $project: {
    leader: 0,
    leader_id: 0
  }
}]);
